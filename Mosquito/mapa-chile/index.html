<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>TEST CIRCLES</title>
    <style>
      @import "ol.css";
    </style>
    <style>
      html, body {
        margin: 0;
        height: 100%;
      }
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

	const params = new Proxy(new URLSearchParams(window.location.search), {
	  get: (searchParams, prop) => searchParams.get(prop),
	});

      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      function drawChart() {

		const comuna = document.getElementById('comuna').value;
		const tipo_mosquito = document.getElementById('tipo').selectedIndex;
		const start_date = document.getElementById('start_date').value;
		const limit_date = document.getElementById('limit_date').value;

		const selectedColor = [
			[255, 87, 34],
			[95, 17, 108],
			[0, 150, 136]
		];

		const url = "https://mosquitoapp.ddns.net/maomao/records/" + comuna + "/" + tipo_mosquito + "/" + start_date + "/" + limit_date;
	  
		fetch(url).then(x => x.json()).then (res => {

			// Create the data table.
			var data = new google.visualization.DataTable();
			
			data.addColumn('string', 'Fecha');
			data.addColumn('number', 'Reportes');

			data.addRows(res.resultado);

			const comunas = {"239456": {"name": "Iquique", "lat": -20.2140657, "lon": -70.1524646}, "239461": {"name": "Alto Hospicio", "lat": -20.2700478, "lon": -70.1009162}, "1561943": {"name": "Pozo Almonte", "lat": -20.2597061, "lon": -69.7861372}, "239347": {"name": "Cami\u00f1a", "lat": -19.313081, "lon": -69.4266968}, "239348": {"name": "Colchane", "lat": -19.2759992, "lon": -68.637842}, "239349": {"name": "Huara", "lat": -19.9957872, "lon": -69.7727034}, "239424": {"name": "Pica", "lat": -20.4911417, "lon": -69.3290752}, "1561898": {"name": "Antofagasta", "lat": -23.6463741, "lon": -70.3980033}, "1564422": {"name": "Mejillones", "lat": -23.1002342, "lon": -70.4483076}, "1561899": {"name": "Sierra Gorda", "lat": -23.3338059, "lon": -69.8434733}, "295883": {"name": "Taltal", "lat": -25.4078293, "lon": -70.4858424}, "1561886": {"name": "Calama", "lat": -22.4623917, "lon": -68.9272181}, "1561885": {"name": "Ollag\u00fce", "lat": -21.2240535, "lon": -68.2535085}, "1574063": {"name": "San Pedro de Atacama", "lat": -22.910832, "lon": -68.2001376}, "1562080": {"name": "Tocopilla", "lat": -22.0887189, "lon": -70.1960657}, "1561887": {"name": "Mar\u00eda Elena", "lat": -22.3451485, "lon": -69.6618035}, "295922": {"name": "Copiap\u00f3", "lat": -27.3664685, "lon": -70.3322753}, "295912": {"name": "Caldera", "lat": -27.0675545, "lon": -70.8222047}, "1572123": {"name": "Tierra Amarilla", "lat": -27.4680505, "lon": -70.2649307}, "295905": {"name": "Cha\u00f1aral", "lat": -26.347934, "lon": -70.6223617}, "295896": {"name": "Diego de Almagro", "lat": -26.3910794, "lon": -70.0459281}, "1572107": {"name": "Vallenar", "lat": -28.5750438, "lon": -70.7616398}, "1572124": {"name": "Alto del Carmen", "lat": -28.7596711, "lon": -70.4861108}, "1572198": {"name": "Freirina", "lat": -28.5086484, "lon": -71.0785719}, "1572197": {"name": "Huasco", "lat": -28.4651248, "lon": -71.2207947}, "1588927": {"name": "La Serena", "lat": -29.902631, "lon": -71.2520253}, "1588926": {"name": "Coquimbo", "lat": -29.9531851, "lon": -71.3379503}, "1589155": {"name": "Andacollo", "lat": -30.2322048, "lon": -71.0847556}, "1588846": {"name": "La Higuera", "lat": -29.511595, "lon": -71.2015007}, "1588854": {"name": "Paihuano", "lat": -30.0290417, "lon": -70.5164414}, "1588848": {"name": "Vicu\u00f1a", "lat": -30.0340482, "lon": -70.7126702}, "1591199": {"name": "Illapel", "lat": -31.6326932, "lon": -71.1683039}, "1591198": {"name": "Canela", "lat": -31.3984185, "lon": -71.4575738}, "231954": {"name": "Los Vilos", "lat": -31.9121611, "lon": -71.5138887}, "231952": {"name": "Salamanca", "lat": -31.7804674, "lon": -70.9649896}, "1590028": {"name": "Ovalle", "lat": -30.6030819, "lon": -71.2029894}, "1589896": {"name": "Combarbal\u00e1", "lat": -31.1781518, "lon": -71.0024382}, "1589854": {"name": "Monte Patria", "lat": -30.6944769, "lon": -70.9579593}, "1589895": {"name": "Punitaqui", "lat": -30.8337532, "lon": -71.2573637}, "1589856": {"name": "R\u00edo Hurtado", "lat": -30.4090831, "lon": -70.9383091}, "110808": {"name": "Valpara\u00edso", "lat": -33.0458456, "lon": -71.6196749}, "112129": {"name": "Casablanca", "lat": -33.3205864, "lon": -71.4100762}, "110722": {"name": "Conc\u00f3n", "lat": -32.9220036, "lon": -71.5159565}, "1773333": {"name": "Juan Fern\u00e1ndez", "lat": -33.6357292, "lon": -78.8313164}, "110710": {"name": "Puchuncav\u00ed", "lat": -32.7259856, "lon": -71.4150065}, "110719": {"name": "Quintero", "lat": -32.7840217, "lon": -71.5283361}, "110804": {"name": "Vi\u00f1a del Mar", "lat": -33.0244535, "lon": -71.5517636}, "1773341": {"name": "Isla de Pascua", "lat": -27.1481172, "lon": -109.427344}, "166557": {"name": "Los Andes", "lat": -32.8336867, "lon": -70.5981609}, "176529": {"name": "Calle Larga", "lat": -32.8552685, "lon": -70.6260407}, "175949": {"name": "Rinconada", "lat": -32.8393819, "lon": -70.6871827}, "231879": {"name": "San Esteban", "lat": -32.7990544, "lon": -70.5795811}, "113201": {"name": "La Ligua", "lat": -32.4496375, "lon": -71.2316695}, "113204": {"name": "Cabildo", "lat": -32.4265909, "lon": -71.0663299}, "113203": {"name": "Papudo", "lat": -32.50759, "lon": -71.4459354}, "231953": {"name": "Petorca", "lat": -32.251699, "lon": -70.9309103}, "110713": {"name": "Zapallar", "lat": -32.5528294, "lon": -71.4588181}, "113196": {"name": "Quillota", "lat": -32.879997, "lon": -71.2473555}, "113226": {"name": "La Calera", "lat": -32.788981, "lon": -71.203546}, "175918": {"name": "Hijuelas", "lat": -32.8000578, "lon": -71.145221}, "113197": {"name": "La Cruz", "lat": -32.8279116, "lon": -71.2271534}, "113199": {"name": "Nogales", "lat": -32.736381, "lon": -71.2002438}, "296816": {"name": "San Antonio", "lat": -33.5808615, "lon": -71.6132377}, "296844": {"name": "Algarrobo", "lat": -33.369172, "lon": -71.6680533}, "296823": {"name": "Cartagena", "lat": -33.5468491, "lon": -71.6031708}, "296843": {"name": "El Quisco", "lat": -33.400311, "lon": -71.693998}, "296841": {"name": "El Tabo", "lat": -33.4545847, "lon": -71.669107}, "296814": {"name": "Santo Domingo", "lat": -33.6405993, "lon": -71.629089}, "176528": {"name": "San Felipe", "lat": -32.750687, "lon": -70.7252688}, "113227": {"name": "Catemu", "lat": -32.7784214, "lon": -70.9633428}, "175943": {"name": "Llay-Llay", "lat": -32.8429976, "lon": -70.9524687}, "175944": {"name": "Panquehue", "lat": -32.7705769, "lon": -70.8361303}, "176538": {"name": "Putaendo", "lat": -32.6260768, "lon": -70.7167642}, "231949": {"name": "Santa Mar\u00eda", "lat": -32.7478749, "lon": -70.6567375}, "110807": {"name": "Quilpu\u00e9", "lat": -33.0498135, "lon": -71.4415282}, "113178": {"name": "Limache", "lat": -33.0018741, "lon": -71.2657315}, "113185": {"name": "Olmu\u00e9", "lat": -32.9956184, "lon": -71.186211}, "112799": {"name": "Villa Alemana", "lat": -33.0441903, "lon": -71.3725464}, "1662436": {"name": "Rancagua", "lat": -34.1702433, "lon": -70.740718}, "1664153": {"name": "Codegua", "lat": -34.0377, "lon": -70.6565422}, "1662398": {"name": "Coinco", "lat": -34.2699359, "lon": -70.9515801}, "1556979": {"name": "Coltauco", "lat": -34.2862794, "lon": -71.0825729}, "1557007": {"name": "Do\u00f1ihue", "lat": -34.226074, "lon": -70.9648916}, "1560884": {"name": "Graneros", "lat": -34.0644743, "lon": -70.7262983}, "1556980": {"name": "Las Cabras", "lat": -34.2917304, "lon": -71.3098439}, "1664171": {"name": "Machal\u00ed", "lat": -34.182453, "lon": -70.6511584}, "1665551": {"name": "Malloa", "lat": -34.4421408, "lon": -70.9440652}, "1557209": {"name": "Mostazal", "lat": -33.9799035, "lon": -70.7121737}, "1662420": {"name": "Olivar", "lat": -34.2094366, "lon": -70.8172288}, "1556987": {"name": "Peumo", "lat": -34.3959163, "lon": -71.1694264}, "1661293": {"name": "Pichidegua", "lat": -34.3584097, "lon": -71.282715}, "1665550": {"name": "Quinta de Tilcoco", "lat": -34.3545849, "lon": -70.9638806}, "1665334": {"name": "Rengo", "lat": -34.4088744, "lon": -70.8616583}, "1665248": {"name": "Requ\u00ednoa", "lat": -34.2848586, "lon": -70.8175128}, "1666367": {"name": "San Vicente de Tagua Tagua", "lat": -34.4392675, "lon": -71.07679}, "1660973": {"name": "Pichilemu", "lat": -34.3851693, "lon": -72.0046606}, "1661286": {"name": "La Estrella", "lat": -34.2052857, "lon": -71.6546039}, "1556895": {"name": "Litueche", "lat": -34.1154229, "lon": -71.7296864}, "1661155": {"name": "Marchihue", "lat": -34.400088, "lon": -71.6182815}, "1556894": {"name": "Navidad", "lat": -33.9536044, "lon": -71.8305775}, "252813": {"name": "Paredones", "lat": -34.6476395, "lon": -71.9008463}, "1675972": {"name": "San Fernando", "lat": -34.583791, "lon": -70.989122}, "252816": {"name": "Ch\u00e9pica", "lat": -34.7285856, "lon": -71.2738582}, "1675973": {"name": "Chimbarongo", "lat": -34.708953, "lon": -71.0403642}, "252817": {"name": "Lolol", "lat": -34.727836, "lon": -71.6440839}, "1674868": {"name": "Nancagua", "lat": -34.6527427, "lon": -71.1953819}, "1675976": {"name": "Palmilla", "lat": -34.5960542, "lon": -71.3624782}, "1661304": {"name": "Peralillo", "lat": -34.4780273, "lon": -71.4793203}, "1674793": {"name": "Placilla", "lat": -34.6385927, "lon": -71.1173651}, "1661441": {"name": "Pumanque", "lat": -34.6048141, "lon": -71.654681}, "1675985": {"name": "Santa Cruz", "lat": -34.6403243, "lon": -71.3661297}, "541797": {"name": "Talca", "lat": -35.4265343, "lon": -71.6660322}, "296369": {"name": "Constituci\u00f3n", "lat": -35.3318306, "lon": -72.4118998}, "252836": {"name": "Curepto", "lat": -35.0937166, "lon": -72.0180794}, "296368": {"name": "Empedrado", "lat": -35.5907772, "lon": -72.2776205}, "541831": {"name": "Maule", "lat": -35.521347, "lon": -71.6918891}, "541799": {"name": "Pelarco", "lat": -35.3836634, "lon": -71.4469824}, "541830": {"name": "Pencahue", "lat": -35.3961663, "lon": -71.7993745}, "544839": {"name": "R\u00edo Claro", "lat": -35.2816338, "lon": -71.2586749}, "546213": {"name": "San Clemente", "lat": -35.5375459, "lon": -71.4858841}, "541816": {"name": "San Rafael", "lat": -35.3050769, "lon": -71.5157209}, "255374": {"name": "Cauquenes", "lat": -35.9671286, "lon": -72.315427}, "296342": {"name": "Chanco", "lat": -35.7341836, "lon": -72.5331642}, "296293": {"name": "Pelluhue", "lat": -35.8452538, "lon": -72.636357}, "544819": {"name": "Curic\u00f3", "lat": -34.985368, "lon": -71.2393705}, "252814": {"name": "Huala\u00f1\u00e9", "lat": -34.9774855, "lon": -71.8012086}, "252837": {"name": "Licant\u00e9n", "lat": -34.9856892, "lon": -71.9845873}, "541828": {"name": "Molina", "lat": -35.1139703, "lon": -71.2799798}, "252815": {"name": "Rauco", "lat": -34.9246071, "lon": -71.3166884}, "544818": {"name": "Romeral", "lat": -34.9599696, "lon": -71.1253134}, "541829": {"name": "Sagrada Familia", "lat": -34.9990365, "lon": -71.3817116}, "544817": {"name": "Teno", "lat": -34.8667952, "lon": -71.1612202}, "252792": {"name": "Vichuqu\u00e9n", "lat": -34.8840168, "lon": -71.9923708}, "255309": {"name": "Linares", "lat": -35.8452905, "lon": -71.5977173}, "255307": {"name": "Colb\u00fan", "lat": -35.6960057, "lon": -71.4060907}, "255308": {"name": "Longav\u00ed", "lat": -35.9659749, "lon": -71.6846723}, "255306": {"name": "Parral", "lat": -36.1414293, "lon": -71.8222221}, "255333": {"name": "Retiro", "lat": -36.0554429, "lon": -71.7650623}, "541848": {"name": "San Javier", "lat": -35.5923933, "lon": -71.735308}, "545904": {"name": "Villa Alegre", "lat": -35.6752031, "lon": -71.7446702}, "545905": {"name": "Yerbas Buenas", "lat": -35.7464128, "lon": -71.5820799}, "1620105": {"name": "Concepci\u00f3n", "lat": -36.8270698, "lon": -73.0502064}, "1622313": {"name": "Coronel", "lat": -37.0164712, "lon": -73.1561953}, "1622086": {"name": "Chiguayante", "lat": -36.9292478, "lon": -73.0237115}, "1622109": {"name": "Florida", "lat": -36.8253041, "lon": -72.6614469}, "1620107": {"name": "Hualqui", "lat": -36.9759363, "lon": -72.9383874}, "1654885": {"name": "Lota", "lat": -37.0944533, "lon": -73.1564024}, "1614637": {"name": "Penco", "lat": -36.7385838, "lon": -72.9937749}, "1622326": {"name": "San Pedro de la Paz", "lat": -36.8414183, "lon": -73.1039909}, "1622274": {"name": "Santa Juana", "lat": -37.1737794, "lon": -72.94259}, "1614638": {"name": "Talcahuano", "lat": -36.7144863, "lon": -73.1141087}, "1558890": {"name": "Tom\u00e9", "lat": -36.6170801, "lon": -72.9575043}, "1614641": {"name": "Hualp\u00e9n", "lat": -36.7927608, "lon": -73.0943414}, "1654913": {"name": "Lebu", "lat": -37.6102279, "lon": -73.656055}, "1654884": {"name": "Arauco", "lat": -37.246248, "lon": -73.3176399}, "1656043": {"name": "Ca\u00f1ete", "lat": -37.8004074, "lon": -73.3990802}, "1656148": {"name": "Contulmo", "lat": -38.0152255, "lon": -73.2293678}, "1655930": {"name": "Curanilahue", "lat": -37.4758037, "lon": -73.3457069}, "1656036": {"name": "Los \u00c1lamos", "lat": -37.6271305, "lon": -73.4618419}, "1656147": {"name": "Tir\u00faa", "lat": -38.3438662, "lon": -73.4934808}, "1658515": {"name": "Los \u00c1ngeles", "lat": -37.4707455, "lon": -72.351686}, "1652379": {"name": "Antuco", "lat": -37.3299761, "lon": -71.6791766}, "1652181": {"name": "Cabrero", "lat": -37.0358293, "lon": -72.4026797}, "1632644": {"name": "Laja", "lat": -37.2795106, "lon": -72.7149212}, "1658516": {"name": "Mulch\u00e9n", "lat": -37.7200873, "lon": -72.2441318}, "1632643": {"name": "Nacimiento", "lat": -37.5018293, "lon": -72.67311}, "1658517": {"name": "Negrete", "lat": -37.5856678, "lon": -72.5292643}, "1659044": {"name": "Quilaco", "lat": -37.6840167, "lon": -72.0041321}, "1659035": {"name": "Quilleco", "lat": -37.4709734, "lon": -71.9803093}, "1622253": {"name": "San Rosendo", "lat": -37.2628517, "lon": -72.7242072}, "1659037": {"name": "Santa B\u00e1rbara", "lat": -37.6680813, "lon": -72.021408}, "1659003": {"name": "Tucapel", "lat": -37.2401857, "lon": -71.9418681}, "1622204": {"name": "Yumbel", "lat": -37.0978676, "lon": -72.5622801}, "1659038": {"name": "Alto Biob\u00edo", "lat": -37.8820267, "lon": -71.6373781}, "1767300": {"name": "Temuco", "lat": -38.7358908, "lon": -72.590538}, "1742431": {"name": "Carahue", "lat": -38.7115844, "lon": -73.1651699}, "1735940": {"name": "Cunco", "lat": -38.9329729, "lon": -72.0320894}, "1734789": {"name": "Curarrehue", "lat": -39.35898, "lon": -71.5873592}, "1767496": {"name": "Freire", "lat": -38.9514242, "lon": -72.6254333}, "1767319": {"name": "Galvarino", "lat": -38.4111234, "lon": -72.7812506}, "1769301": {"name": "Gorbea", "lat": -39.1032067, "lon": -72.6759888}, "1767210": {"name": "Lautaro", "lat": -38.534312, "lon": -72.4350504}, "1768852": {"name": "Loncoche", "lat": -39.370616, "lon": -72.6300704}, "1735968": {"name": "Melipeuco", "lat": -38.8532381, "lon": -71.6950139}, "1768732": {"name": "Nueva Imperial", "lat": -38.7453101, "lon": -72.9519984}, "1768743": {"name": "Padre Las Casas", "lat": -38.7674245, "lon": -72.5956312}, "1766982": {"name": "Perquenco", "lat": -38.4212493, "lon": -72.3778344}, "1768825": {"name": "Pitrufqu\u00e9n", "lat": -38.9862884, "lon": -72.63725}, "1734577": {"name": "Puc\u00f3n", "lat": -39.2731173, "lon": -71.9777605}, "1767375": {"name": "Saavedra", "lat": -38.7923166, "lon": -73.3968651}, "1767428": {"name": "Teodoro Schmidt", "lat": -38.9967454, "lon": -73.0891844}, "1769297": {"name": "Tolt\u00e9n", "lat": -39.1782056, "lon": -73.163885}, "1736000": {"name": "Vilc\u00fan", "lat": -38.6703516, "lon": -72.2240524}, "1734921": {"name": "Villarrica", "lat": -39.2780911, "lon": -72.2274364}, "1767500": {"name": "Cholchol", "lat": -38.6025592, "lon": -72.8476626}, "1742885": {"name": "Angol", "lat": -37.798787, "lon": -72.7086097}, "1736040": {"name": "Collipulli", "lat": -37.9566312, "lon": -72.4374375}, "1736036": {"name": "Curacaut\u00edn", "lat": -38.4372985, "lon": -71.8883419}, "1766964": {"name": "Ercilla", "lat": -38.0609055, "lon": -72.3754686}, "1736001": {"name": "Lonquimay", "lat": -38.4547975, "lon": -71.3706166}, "1763067": {"name": "Los Sauces", "lat": -37.9829562, "lon": -72.8291829}, "1742570": {"name": "Lumaco", "lat": -38.1651006, "lon": -72.9067623}, "1742662": {"name": "Pur\u00e9n", "lat": -38.0332836, "lon": -73.0725938}, "1742919": {"name": "Renaico", "lat": -37.671709, "lon": -72.5832643}, "1766983": {"name": "Traigu\u00e9n", "lat": -38.250816, "lon": -72.6668798}, "1766981": {"name": "Victoria", "lat": -38.2339494, "lon": -72.3316568}, "1798806": {"name": "Puerto Montt", "lat": -41.471798, "lon": -72.9395915}, "1798800": {"name": "Calbuco", "lat": -41.7712143, "lon": -73.1275379}, "1798828": {"name": "Cocham\u00f3", "lat": -41.6642824, "lon": -72.2962174}, "1796332": {"name": "Fresia", "lat": -41.1531405, "lon": -73.4223148}, "1796410": {"name": "Frutillar", "lat": -41.1258462, "lon": -73.0604738}, "1798792": {"name": "Los Muermos", "lat": -41.3960568, "lon": -73.4617177}, "1798791": {"name": "Llanquihue", "lat": -41.2575704, "lon": -73.0047428}, "1798790": {"name": "Maull\u00edn", "lat": -41.6160139, "lon": -73.5950711}, "1798888": {"name": "Puerto Varas", "lat": -41.317802, "lon": -72.9829073}, "3076091": {"name": "Castro", "lat": -42.482375, "lon": -73.7642918}, "3078203": {"name": "Ancud", "lat": -41.8682162, "lon": -73.8287225}, "3076208": {"name": "Chonchi", "lat": -42.6239756, "lon": -73.7724416}, "3078354": {"name": "Curaco de V\u00e9lez", "lat": -42.4396611, "lon": -73.6028415}, "3077688": {"name": "Dalcahue", "lat": -42.3795533, "lon": -73.6472998}, "3078387": {"name": "Puqueld\u00f3n", "lat": -42.5992585, "lon": -73.6762714}, "3076728": {"name": "Queilen", "lat": -42.8898582, "lon": -73.472062}, "3076644": {"name": "Quell\u00f3n", "lat": -43.1200305, "lon": -73.6203025}, "3078348": {"name": "Quemchi", "lat": -42.1445307, "lon": -73.4735593}, "3078364": {"name": "Quinchao", "lat": -42.471001, "lon": -73.488078}, "1794711": {"name": "Osorno", "lat": -40.5736955, "lon": -73.1358091}, "1795768": {"name": "Puerto Octay", "lat": -40.97276, "lon": -72.8842171}, "1795811": {"name": "Purranque", "lat": -40.9128096, "lon": -73.1581888}, "1795049": {"name": "Puyehue", "lat": -40.6835571, "lon": -72.6039988}, "1795795": {"name": "R\u00edo Negro", "lat": -40.7961713, "lon": -73.2163904}, "1791817": {"name": "San Juan de la Costa", "lat": -40.6047274, "lon": -73.470531}, "1791802": {"name": "San Pablo", "lat": -40.4127606, "lon": -73.0115777}, "1820338": {"name": "Chait\u00e9n", "lat": -42.9165335, "lon": -72.7084192}, "3067460": {"name": "Futaleuf\u00fa", "lat": -43.185771, "lon": -71.866702}, "1820318": {"name": "Hualaihu\u00e9", "lat": -41.9660516, "lon": -72.4706795}, "3067455": {"name": "Palena", "lat": -43.6178268, "lon": -71.8039587}, "1982302": {"name": "Coyhaique", "lat": -45.5711804, "lon": -72.0684863}, "1982310": {"name": "Lago Verde", "lat": -44.2402147, "lon": -71.8492779}, "1982383": {"name": "Ays\u00e9n", "lat": -45.4068167, "lon": -72.6976787}, "1982362": {"name": "Cisnes", "lat": -44.7272567, "lon": -72.680463}, "1982324": {"name": "Guaitecas", "lat": -43.8975173, "lon": -73.7463997}, "1981561": {"name": "Cochrane", "lat": -47.2541656, "lon": -72.5732128}, "1981246": {"name": "O'Higgins", "lat": -48.4684802, "lon": -72.5592493}, "1981462": {"name": "Tortel", "lat": -47.8036754, "lon": -73.5374644}, "1982287": {"name": "Chile Chico", "lat": -46.5396625, "lon": -71.7245816}, "1982289": {"name": "R\u00edo Ib\u00e1\u00f1ez", "lat": -46.2919029, "lon": -71.9374916}, "1979467": {"name": "Punta Arenas", "lat": -53.1625688, "lon": -70.907822}, "1980431": {"name": "Laguna Blanca", "lat": -52.4270382, "lon": -71.4141605}, "1980437": {"name": "R\u00edo Verde", "lat": -52.6506926, "lon": -71.4634208}, "1980429": {"name": "San Gregorio", "lat": -52.3158634, "lon": -69.6905678}, "1979223": {"name": "Cabo de Hornos", "lat": -54.935761, "lon": -67.6061824}, "1980517": {"name": "Porvenir", "lat": -53.2956738, "lon": -70.3687401}, "1980521": {"name": "Primavera", "lat": -52.7764615, "lon": -69.2909082}, "1980553": {"name": "Timaukel", "lat": -53.6397237, "lon": -69.646329}, "1980619": {"name": "Natales", "lat": -51.7262003, "lon": -72.5059982}, "1980641": {"name": "Torres del Paine", "lat": -51.2562493, "lon": -72.3446885}, "164609": {"name": "Santiago", "lat": -33.4377756, "lon": -70.6504502}, "168260": {"name": "Cerrillos", "lat": -33.4879868, "lon": -70.7030815}, "168271": {"name": "Cerro Navia", "lat": -33.4289362, "lon": -70.7306748}, "190910": {"name": "Conchal\u00ed", "lat": -33.3960309, "lon": -70.6708385}, "191203": {"name": "El Bosque", "lat": -33.5561468, "lon": -70.6655679}, "168058": {"name": "Estaci\u00f3n Central", "lat": -33.4536375, "lon": -70.6898654}, "164091": {"name": "Huechuraba", "lat": -33.3744615, "lon": -70.6362988}, "168060": {"name": "Independencia", "lat": -33.422295, "lon": -70.6554648}, "191200": {"name": "La Cisterna", "lat": -33.5346265, "lon": -70.6644024}, "224590": {"name": "La Florida", "lat": -33.5204181, "lon": -70.6006178}, "191220": {"name": "La Granja", "lat": -33.5431234, "lon": -70.6332426}, "191216": {"name": "La Pintana", "lat": -33.5833594, "lon": -70.629827}, "162992": {"name": "La Reina", "lat": -33.442282, "lon": -70.5432729}, "162991": {"name": "Las Condes", "lat": -33.4084548, "lon": -70.5671489}, "164090": {"name": "Lo Barnechea", "lat": -33.3616012, "lon": -70.5051957}, "191193": {"name": "Lo Espejo", "lat": -33.5250782, "lon": -70.694539}, "168268": {"name": "Lo Prado", "lat": -33.4426273, "lon": -70.7178219}, "191190": {"name": "Macul", "lat": -33.4821635, "lon": -70.5991929}, "168259": {"name": "Maip\u00fa", "lat": -33.5094409, "lon": -70.756182}, "162993": {"name": "\u00d1u\u00f1oa", "lat": -33.4543164, "lon": -70.5936358}, "168057": {"name": "Pedro Aguirre Cerda", "lat": -33.49383, "lon": -70.6760755}, "164137": {"name": "Pe\u00f1alol\u00e9n", "lat": -33.4765918, "lon": -70.5418308}, "162983": {"name": "Providencia", "lat": -33.4321835, "lon": -70.6095284}, "168269": {"name": "Pudahuel", "lat": -33.4368017, "lon": -70.7517915}, "164102": {"name": "Quilicura", "lat": -33.367767, "lon": -70.731549}, "168059": {"name": "Quinta Normal", "lat": -33.4225631, "lon": -70.6944892}, "162984": {"name": "Recoleta", "lat": -33.4020744, "lon": -70.6428912}, "109577": {"name": "Renca", "lat": -33.4042423, "lon": -70.7049708}, "168055": {"name": "San Joaqu\u00edn", "lat": -33.4965843, "lon": -70.6290637}, "168056": {"name": "San Miguel", "lat": -33.4859746, "lon": -70.6495465}, "191201": {"name": "San Ram\u00f3n", "lat": -33.5428175, "lon": -70.643812}, "162990": {"name": "Vitacura", "lat": -33.3871062, "lon": -70.5764516}, "166571": {"name": "Puente Alto", "lat": -33.6095279, "lon": -70.5754736}, "238959": {"name": "Pirque", "lat": -33.6348808, "lon": -70.5729961}, "166556": {"name": "San Jos\u00e9 de Maipo", "lat": -33.6403975, "lon": -70.3527845}, "164101": {"name": "Colina", "lat": -33.202472, "lon": -70.6749147}, "168295": {"name": "Lampa", "lat": -33.2864213, "lon": -70.8729771}, "175894": {"name": "Tiltil", "lat": -33.0852808, "lon": -70.9293877}, "660810": {"name": "San Bernardo", "lat": -33.5922859, "lon": -70.7045838}, "660816": {"name": "Buin", "lat": -33.7319741, "lon": -70.7419619}, "1626780": {"name": "Calera de Tango", "lat": -33.6309419, "lon": -70.7593202}, "1557208": {"name": "Paine", "lat": -33.8101102, "lon": -70.7390236}, "296835": {"name": "Melipilla", "lat": -33.6855134, "lon": -71.2145796}, "1556873": {"name": "Alhu\u00e9", "lat": -34.0320589, "lon": -71.0991207}, "168297": {"name": "Curacav\u00ed", "lat": -33.4022289, "lon": -71.1293733}, "296839": {"name": "Mar\u00eda Pinto", "lat": -33.5159823, "lon": -71.1200324}, "296836": {"name": "San Pedro", "lat": -33.8943545, "lon": -71.4563149}, "1626706": {"name": "Talagante", "lat": -33.6644388, "lon": -70.9302778}, "1617563": {"name": "El Monte", "lat": -33.6783192, "lon": -70.9782465}, "1557251": {"name": "Isla de Maipo", "lat": -33.7537387, "lon": -70.9039325}, "175820": {"name": "Padre Hurtado", "lat": -33.5673051, "lon": -70.8020467}, "1626477": {"name": "Pe\u00f1aflor", "lat": -33.6058638, "lon": -70.8785306}, "1785691": {"name": "Valdivia", "lat": -39.8141262, "lon": -73.2459859}, "1785692": {"name": "Corral", "lat": -39.8877399, "lon": -73.4314543}, "1771698": {"name": "Lanco", "lat": -39.4522225, "lon": -72.7754222}, "1785707": {"name": "Los Lagos", "lat": -39.8634009, "lon": -72.8129655}, "1785668": {"name": "M\u00e1fil", "lat": -39.6659792, "lon": -72.9521276}, "1785656": {"name": "Mariquina", "lat": -39.5394521, "lon": -72.961085}, "1785852": {"name": "Paillaco", "lat": -40.0706633, "lon": -72.8726695}, "1769309": {"name": "Panguipulli", "lat": -39.6419909, "lon": -72.3333801}, "1791148": {"name": "Comuna de La Uni\u00f3n", "lat": -40.2952392, "lon": -73.0820366}, "1785847": {"name": "Futrono", "lat": -40.131196, "lon": -72.3826602}, "1791290": {"name": "Lago Ranco", "lat": -40.3216708, "lon": -72.4813502}, "1791147": {"name": "R\u00edo Bueno", "lat": -40.3336678, "lon": -72.9567617}, "269826": {"name": "Arica", "lat": -18.4785288, "lon": -70.3211394}, "406185": {"name": "Camarones", "lat": -19.1401644, "lon": -70.1592132}, "406176": {"name": "Putre", "lat": -18.1963825, "lon": -69.5592242}, "406175": {"name": "General Lagos", "lat": -17.5947669, "lon": -69.4815536}, "255340": {"name": "Chill\u00e1n", "lat": -36.6066616, "lon": -72.1033194}, "1597490": {"name": "Bulnes", "lat": -36.7422507, "lon": -72.2987216}, "269390": {"name": "Chill\u00e1n Viejo", "lat": -36.6230032, "lon": -72.1317093}, "1560012": {"name": "El Carmen", "lat": -36.897855, "lon": -72.0246149}, "1652065": {"name": "Pemuco", "lat": -36.9767381, "lon": -72.0988563}, "269309": {"name": "Pinto", "lat": -36.7036112, "lon": -71.8922832}, "1597510": {"name": "Quill\u00f3n", "lat": -36.7443758, "lon": -72.4764427}, "269388": {"name": "San Ignacio", "lat": -36.7998233, "lon": -72.0303507}, "1652478": {"name": "Yungay", "lat": -37.1193665, "lon": -72.0188531}, "296295": {"name": "Quirihue", "lat": -36.2827085, "lon": -72.5408101}, "296294": {"name": "Cobquecura", "lat": -36.1317572, "lon": -72.7915423}, "1558627": {"name": "Coelemu", "lat": -36.4876004, "lon": -72.7023316}, "296296": {"name": "Ninhue", "lat": -36.3935896, "lon": -72.3976432}, "1558832": {"name": "Portezuelo", "lat": -36.5274395, "lon": -72.4285292}, "1558833": {"name": "R\u00e1nquil", "lat": -36.605064, "lon": -72.5343744}, "1558531": {"name": "Treguaco", "lat": -36.4307029, "lon": -72.6658186}, "255339": {"name": "San Carlos", "lat": -36.4248192, "lon": -71.9581208}, "255295": {"name": "Coihueco", "lat": -36.628802, "lon": -71.8319077}, "255335": {"name": "\u00d1iqu\u00e9n", "lat": -36.282754, "lon": -71.8148307}, "255296": {"name": "San Fabi\u00e1n", "lat": -36.556603, "lon": -71.5499036}, "1558759": {"name": "San Nicol\u00e1s", "lat": -36.5034264, "lon": -72.2123765}};

			// Set chart options
			var options = {
				'title':'Reportes por día para ' + comunas[comuna].name,
				'width':1240,
				'height':600,
				'colors': ['rgb(' + selectedColor[tipo_mosquito].join(',') + ')']
		   };

			// Instantiate and draw our chart, passing in some options.
			var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
			chart.draw(data, options);
		});
      }
	  
	  function filter_by_date() {

		// Set a callback to run when the Google Visualization API is loaded.
		google.charts.setOnLoadCallback(drawChart);
	  }

		window.applyFilter = function (osm_id) {
		
			document.getElementById('comuna').value = osm_id;
		
			var exampleModal = document.getElementById('exampleModal')
			exampleModal.addEventListener('shown.bs.modal', function (event) {

				clearTimeout(window.customTimer);
				window.customTimer = setTimeout(filter_by_date, 500);
			})

			document.getElementById('chart_div').replaceChildren();

			var myModal = new bootstrap.Modal(exampleModal, {})
			myModal.toggle();
		
			document.getElementById('tipo').selectedIndex = parseInt(params.tipo);
		};

    </script>
  </head>
  <body>
    <div id="zoomtoswitzerland"></div>
	<div id="centerlausanne"></div>
    <div id="map"></div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="./bundle.js"></script>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-fullscreen">
    <div class="modal-content">
      <div class="modal-header">
<div>
		Desde: <input type="date" value="2024-01-01" id="start_date" onchange="filter_by_date()" />
		Hasta: <input type="date" value="2024-12-31" id="limit_date" onchange="filter_by_date()" />
		&nbsp;
		<select id="tipo" onchange="filter_by_date()">
			<option value="0">Aedes</option>
			<option value="1">Culex</option>
			<option value="2">Otros</option>
		</select>
		<input type="hidden" value="" id="comuna" />
</div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
  </body>
</html>